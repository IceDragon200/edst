#!/usr/bin/env ruby
require 'edst/cli/quick_html_renderer'
require 'ostruct'
require 'optparse'

options = OpenStruct.new(
  directory: Dir.getwd,
  template: ENV['EDST_HTML_TEMPLATE'].presence
)

parser = OptionParser.new do |opts|
  opts.on '-d', '--directory NAME', String, 'Output directory' do |v|
    options.directory = v
  end

  opts.on '-t', '--template NAME', String, 'Template file' do |v|
    options.template = v
  end
end

argv = parser.parse(ARGV)
renderer = EDST::QuickHtmlRenderer.new
argv.each do |filename|
  renderer.render_file filename, options
end
